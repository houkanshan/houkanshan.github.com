
<!DOCTYPE html>
<html lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>在本地同步两个代码版本库</title>
   <meta name="author" content="Hou Kanshan" />
   <link href="http://feeds.feedburner.com/HoukanshansBlog" rel="alternate" title="houkanshan" type="application/atom+xml" />
   <link rel="stylesheet" href="/assets/styles/main.css" type="text/css" media="screen, projection" />
   <!--[if IE]>
   <script type="text/javascript">
     (function(){var elements="abbr article aside audio canvas datalist details dialog eventsource figure footer header hgroup mark menu meter nav output progress section time video";elements.replace(/\w+/g,function(e){document.createElement(e)})})();
   </script>
   <![endif]-->
</head>
<body>
  <div class="wrapper">
    <header>
      <h1><a id="home" href="/">Houkanshan's blog</a></h1>
      
      <ul class="nav">
          <li><a class="extra" href="/archive.html">Archive</a></li>
          <li><a class="extra" href="/demo.html">Demo</a></li>
          <li><a class="extra" href="/about.html">About</a></li>
          <!--<a class="extra" href="">Pages</a>-->
          <!--<a class="extra" href="/categories.html">Categories</a>-->
          <!--<a class="extra" href="/tags.html">Tags</a>-->
      </ul>
    </header>

    <article>
      
<div id="post" class="post">
  <div class="hd">
      <h2>在本地同步两个代码版本库</h2>
      <span class="meta">
        16 April 2012 
        
      </span>
  </div>
  <div class="bd">
    <p>很多人难免不得已用了两个系统，就像我这种什么都会点又什么都不会的类型。Windows上要做图、写Doc、调IE，反正多数是些非正业的事情，Linux上写代码。但是切换很麻烦，所有经常就顺便在Win上写了。本来是可以直接把代码放在Win的NTFS分区上两个系统都可以访问的，但是上次因为操作系统休眠的问题丢了代码(<a href='http://xiaoxia.org/2011/07/29/linuxwindows-dual-system-of-sleep-function-almost-put-the-files-on-the-ntfs-lost'>跟这个同学情况类似</a>) ，就决定在两个系统上分别放代码了。</p>

<p>一个同步的办法是用github，但是最近感觉开发中的代码最好还是不要没事就push一下，容易刷屏。但是要同步又必须是即时的，于是觉得应该可以直接在本地push/pull。</p>

<p>git可以很方便的在本地push/pull而不需要daemon进程，直接git init &#8211;bare就可以了。但这样创建的版本库只有.git目录，没有工作时的代码(working dir)。在上面用通常的方法做push/pull一类操作都会提示“This operation must be run in a work tree”</p>

<p>开始是觉得一个git库因该是可以同时做Server和Client的，也就是在linux上往windows上的库直接push,尝试之后发现不行，因为在Client所有的push和pull都是主动的操作，Server都是被动接受的，同时一个Client是不应该有被动的行为的，所以也就是不能同时有两个角色。</p>

<p>虽然可以通过一些很不正常的方法让server也获得代码并临时变成client再往远程push。但毕竟很丑陋。。。</p>

<p>在NTFS上为了同步再加个repository，init为bare。在本地先push到这里，在有必要的时候再push到github上。</p>

<p><img alt='示意图' src='/img/git-repo.png' /></p>

<p>虽然有时候需要push两次，但是我觉得对于我这种情况，这的确是必要的步骤。</p>

<p>git真灵活～赞美。。。</p>
<hr />
<p>又改了点样式，我表示这个主题是不是太烂了点啊。。。</p>
  </div>
</div>

<div class="related">
  <h2>Related</h2>
  <ul class="posts">
    
      <li>
        <a href="/2012/10/30/html-css-mark">CSS & HTML 笔记</a>
        <span class="date">30 Oct 2012</span>
      </li>
    
      <li>
        <a href="/2012/10/09/dynamic-configuration-of-css">动态配置的CSS</a>
        <span class="date">09 Oct 2012</span>
      </li>
    
  </ul>
</div>




  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'houkanshansblog'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>






    </article>

    <footer>
      <!--<div class="contact">-->
        <!--<p>-->
          <!--Hou Kanshan<br />-->
          <!--Houkanshan<br />-->
          <!--<a href='mailto:'></a>-->
        <!--</p>-->
      <!--</div>-->
      <!--<div class="contact">-->
          <!--<br />-->
          <!--<a href="http://twitter.com/houkanshan/">twitter.com/houkanshan</a><br />-->
        <!--</p>-->
      <!--</div>-->
      <p><small>Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>, <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> and <a href="http://pages.github.com/">GitHub</a> | <a href="http://github.com/houkanshan/">github.com/houkanshan</a></small></p>
      <div class="rss">
        <a href="http://feeds.feedburner.com/HoukanshansBlog">
          <!--<img src="/assets/images/rss.png" alt="Subscribe to RSS Feed" />-->
        </a>
      </div>
    </footer>
  </div>
  
  <script type="text/javascript" src="/assets/scripts/libs/zepto.min.js"></script>
  <script type="text/javascript" src="/assets/scripts/main.js"></script>
</body>
</html>

